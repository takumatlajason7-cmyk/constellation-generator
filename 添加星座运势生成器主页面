<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ç”Ÿå‘½æ–¹ç¨‹å¼ - ä¸“ä¸šæ˜Ÿåº§è¿åŠ¿ç”Ÿæˆå™¨ï¼ŒåŸºäºèšåˆæ•°æ®APIçš„æ™ºèƒ½æ˜Ÿåº§è¿åŠ¿åˆ†æç³»ç»Ÿ">
    <meta name="keywords" content="æ˜Ÿåº§,è¿åŠ¿,å åœ,ç”Ÿå‘½æ–¹ç¨‹å¼,æ˜Ÿåº§è¿åŠ¿,æ¯æ—¥è¿åŠ¿">
    <meta name="author" content="ç”Ÿå‘½æ–¹ç¨‹å¼å›¢é˜Ÿ">
    <title>ç”Ÿå‘½æ–¹ç¨‹å¼ - ä¸“ä¸šæ˜Ÿåº§è¿åŠ¿ç”Ÿæˆå™¨</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>ğŸŒŸ</text></svg>">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0d1f0d 0%, #1a3d1a 30%, #2d5a2d 70%, #1a3d1a 100%);
            min-height: 100vh;
            color: #E8F5E8;
            overflow-x: hidden;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }

        .main-title {
            font-size: 3rem;
            color: #E8F5E8;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(144, 238, 144, 0.5);
            animation: titleGlow 3s ease-in-out infinite alternate;
            font-weight: 700;
        }

        @keyframes titleGlow {
            0% { text-shadow: 0 0 20px rgba(144, 238, 144, 0.5), 0 0 40px rgba(144, 238, 144, 0.2); }
            100% { text-shadow: 0 0 30px rgba(144, 238, 144, 0.8), 0 0 60px rgba(144, 238, 144, 0.4); }
        }

        .subtitle {
            font-size: 1.3rem;
            color: #90EE90;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .version-info {
            font-size: 0.9rem;
            color: #98FB98;
            opacity: 0.8;
            margin-bottom: 30px;
        }

        .feature-badges {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .badge {
            background: rgba(144, 238, 144, 0.2);
            color: #90EE90;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.85rem;
            border: 1px solid rgba(144, 238, 144, 0.3);
        }

        .api-config {
            background: rgba(255, 255, 255, 0.05);
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 30px;
            border: 2px solid rgba(144, 238, 144, 0.2);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .api-config:hover {
            border-color: rgba(144, 238, 144, 0.4);
            box-shadow: 0 5px 25px rgba(144, 238, 144, 0.1);
        }

        .config-title {
            color: #90EE90;
            margin-bottom: 20px;
            font-size: 1.4rem;
            text-align: center;
        }

        .config-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .config-item {
            margin-bottom: 15px;
        }

        .config-item label {
            display: block;
            margin-bottom: 8px;
            color: #ADFF2F;
            font-weight: 600;
            font-size: 0.95rem;
        }

        .config-item input, .config-item select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid rgba(144, 238, 144, 0.3);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: #E8F5E8;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .config-item input:focus, .config-item select:focus {
            outline: none;
            border-color: #90EE90;
            box-shadow: 0 0 15px rgba(144, 238, 144, 0.3);
            background: rgba(255, 255, 255, 0.15);
        }

        .config-item input::placeholder {
            color: rgba(232, 245, 232, 0.6);
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .btn {
            background: linear-gradient(45deg, #2d5a2d, #4a7c59);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
            background: linear-gradient(45deg, #4a7c59, #5d9f6e);
        }

        .btn.primary {
            background: linear-gradient(45deg, #228B22, #32CD32);
            font-size: 1.3rem;
            padding: 18px 40px;
            animation: pulseGreen 2s ease-in-out infinite;
        }

        @keyframes pulseGreen {
            0%, 100% { box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3); }
            50% { box-shadow: 0 4px 25px rgba(50, 205, 50, 0.4), 0 0 20px rgba(50, 205, 50, 0.2); }
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn:disabled:hover {
            transform: none;
        }

        .status {
            text-align: center;
            margin: 20px 0;
            padding: 25px;
            border-radius: 20px;
            font-weight: 500;
            white-space: pre-line;
            backdrop-filter: blur(15px);
            border: 2px solid transparent;
            transition: all 0.3s ease;
            line-height: 1.6;
        }

        .status.loading {
            background: rgba(255, 193, 7, 0.15);
            color: #FFC107;
            border-color: rgba(255, 193, 7, 0.5);
            animation: loadingPulse 1.5s ease-in-out infinite;
        }

        @keyframes loadingPulse {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.02); opacity: 1; }
        }

        .status.success {
            background: rgba(40, 167, 69, 0.15);
            color: #28A745;
            border-color: rgba(40, 167, 69, 0.5);
            animation: successGlow 0.5s ease-out;
        }

        @keyframes successGlow {
            0% { transform: scale(0.95); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .status.error {
            background: rgba(220, 53, 69, 0.15);
            color: #DC3545;
            border-color: rgba(220, 53, 69, 0.5);
            animation: errorShake 0.5s ease-out;
        }

        @keyframes errorShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .status.info {
            background: rgba(23, 162, 184, 0.15);
            color: #17A2B8;
            border-color: rgba(23, 162, 184, 0.5);
        }

        .horoscope-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .horoscope-card {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(144, 238, 144, 0.2);
            border-radius: 20px;
            padding: 25px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .horoscope-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #228B22, #32CD32, #90EE90);
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }

        .horoscope-card:hover::before {
            transform: translateX(0);
        }

        .horoscope-card:hover {
            border-color: rgba(144, 238, 144, 0.5);
            box-shadow: 0 10px 30px rgba(144, 238, 144, 0.15);
            transform: translateY(-5px);
        }

        .card-title {
            font-size: 1.6rem;
            color: #90EE90;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 700;
        }

        .card-content {
            line-height: 1.7;
        }

        .card-content h4 {
            color: #ADFF2F;
            margin: 15px 0 8px 0;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .star-rating {
            color: #FFD700;
            font-size: 1.2rem;
            margin-left: 5px;
        }

        .lucky-info {
            background: rgba(144, 238, 144, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            border-left: 4px solid #90EE90;
        }

        .color-preview {
            display: inline-block;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            margin: 0 8px;
            vertical-align: middle;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .hidden {
            display: none;
        }

        .api-info {
            background: rgba(23, 162, 184, 0.15);
            padding: 20px;
            border-radius: 15px;
            border: 2px solid rgba(23, 162, 184, 0.3);
            margin-bottom: 25px;
            color: #17A2B8;
        }

        .api-info h3 {
            margin-bottom: 10px;
            color: #17A2B8;
        }

        .api-links {
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .api-links a {
            color: #90EE90;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .api-links a:hover {
            color: #ADFF2F;
            text-shadow: 0 0 10px rgba(173, 255, 47, 0.5);
        }

        .footer {
            text-align: center;
            margin-top: 60px;
            padding: 40px 20px;
            border-top: 2px solid rgba(144, 238, 144, 0.2);
            color: #98FB98;
        }

        .footer p {
            margin: 10px 0;
        }

        .footer .copyright {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-top: 20px;
        }

        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 2px solid #90EE90;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .main-title {
                font-size: 2.2rem;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 300px;
                margin: 8px 0;
            }
            
            .horoscope-grid {
                grid-template-columns: 1fr;
            }
            
            .config-grid {
                grid-template-columns: 1fr;
            }
            
            .feature-badges {
                justify-content: center;
            }
        }

        @media (max-width: 480px) {
            .main-title {
                font-size: 1.8rem;
            }
            
            .api-config {
                padding: 20px;
            }
            
            .horoscope-card {
                padding: 20px;
            }
        }

        /* æ‰“å°æ ·å¼ */
        @media print {
            body {
                background: white !important;
                color: black !important;
            }
            
            .controls, .api-config {
                display: none !important;
            }
            
            .horoscope-card {
                border: 1px solid #ccc !important;
                box-shadow: none !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="main-title">ğŸŒŸ ç”Ÿå‘½æ–¹ç¨‹å¼</h1>
            <p class="subtitle" id="dateSubtitle">ä¸“ä¸šæ˜Ÿåº§è¿åŠ¿ç”Ÿæˆå™¨</p>
            <p class="version-info">GitHub Pages éƒ¨ç½²ç‰ˆ | åŸºäºèšåˆæ•°æ®API</p>
            
            <div class="feature-badges">
                <span class="badge">ğŸ”® AIç®—æ³•</span>
                <span class="badge">ğŸ“Š å››ç»´è¯„åˆ†</span>
                <span class="badge">ğŸŒˆ å¹¸è¿è‰²å½©</span>
                <span class="badge">â­ å®æ—¶æ•°æ®</span>
                <span class="badge">ğŸ“± å“åº”å¼</span>
            </div>
        </header>

        <div class="api-info">
            <h3>ğŸ“¡ APIæ•°æ®è¯´æ˜</h3>
            <p>æœ¬åº”ç”¨é›†æˆèšåˆæ•°æ®æ˜Ÿåº§è¿åŠ¿APIï¼Œæä¾›çœŸå®å‡†ç¡®çš„æ˜Ÿåº§è¿åŠ¿æ•°æ®ã€‚æ”¯æŒä»Šæ—¥ã€æ˜æ—¥ã€æœ¬å‘¨ã€æœ¬æœˆå¤šç§è¿åŠ¿ç±»å‹ï¼ŒåŒ…å«çˆ±æƒ…ã€å·¥ä½œã€è´¢è¿ã€å¥åº·å››ç»´åº¦ä¸“ä¸šè¯„åˆ†ç³»ç»Ÿã€‚</p>
        </div>

        <div class="api-config">
            <h3 class="config-title">ğŸ”‘ APIé…ç½®ä¸­å¿ƒ</h3>
            
            <div class="config-grid">
                <div class="config-item">
                    <label for="apiKey">ğŸ” èšåˆæ•°æ®APIå¯†é’¥:</label>
                    <input type="password" id="apiKey" placeholder="è¯·è¾“å…¥æ‚¨çš„API Key" />
                </div>

                <div class="config-item">
                    <label for="consType">ğŸ“… è¿åŠ¿æŸ¥è¯¢ç±»å‹:</label>
                    <select id="consType">
                        <option value="today">ä»Šæ—¥è¿åŠ¿</option>
                        <option value="tomorrow">æ˜æ—¥è¿åŠ¿</option>
                        <option value="week">æœ¬å‘¨è¿åŠ¿</option>
                        <option value="month">æœ¬æœˆè¿åŠ¿</option>
                    </select>
                </div>

                <div class="config-item">
                    <label for="targetConstellation">ğŸ¯ æŒ‡å®šæ˜Ÿåº§æŸ¥è¯¢:</label>
                    <select id="targetConstellation">
                        <option value="">è·å–å…¨éƒ¨12æ˜Ÿåº§</option>
                        <option value="aries">â™ˆ ç™½ç¾Šåº§ (3.21-4.19)</option>
                        <option value="taurus">â™‰ é‡‘ç‰›åº§ (4.20-5.20)</option>
                        <option value="gemini">â™Š åŒå­åº§ (5.21-6.21)</option>
                        <option value="cancer">â™‹ å·¨èŸ¹åº§ (6.22-7.22)</option>
                        <option value="leo">â™Œ ç‹®å­åº§ (7.23-8.22)</option>
                        <option value="virgo">â™ å¤„å¥³åº§ (8.23-9.22)</option>
                        <option value="libra">â™ å¤©ç§¤åº§ (9.23-10.23)</option>
                        <option value="scorpio">â™ å¤©èåº§ (10.24-11.22)</option>
                        <option value="sagittarius">â™ å°„æ‰‹åº§ (11.23-12.21)</option>
                        <option value="capricorn">â™‘ æ‘©ç¾¯åº§ (12.22-1.19)</option>
                        <option value="aquarius">â™’ æ°´ç“¶åº§ (1.20-2.18)</option>
                        <option value="pisces">â™“ åŒé±¼åº§ (2.19-3.20)</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="controls">
            <button class="btn primary" id="fetchBtn">
                ğŸŒŸ è·å–çœŸå®è¿åŠ¿
            </button>
            <button class="btn" id="testApiBtn">
                ğŸ”§ æµ‹è¯•APIè¿æ¥
            </button>
            <button class="btn" id="demoBtn">
                ğŸ­ æ¼”ç¤ºæ¨¡å¼
            </button>
            <button class="btn" id="clearBtn">
                ğŸ—‘ï¸ æ¸…é™¤æ•°æ®
            </button>
        </div>

        <div id="statusMessage" class="status hidden"></div>

        <div id="horoscopeResults" class="horoscope-grid hidden"></div>

        <div class="api-links">
            <p><strong>ğŸ“š APIæ–‡æ¡£:</strong> <a href="https://www.juhe.cn/docs/api/id/58" target="_blank" rel="noopener">èšåˆæ•°æ®æ˜Ÿåº§è¿åŠ¿API</a></p>
            <p><strong>ğŸ”‘ è·å–å¯†é’¥:</strong> <a href="https://www.juhe.cn/" target="_blank" rel="noopener">èšåˆæ•°æ®å®˜ç½‘æ³¨å†Œ</a></p>
            <p><strong>ğŸ’¡ ä½¿ç”¨è¯´æ˜:</strong> æ³¨å†Œè´¦å· â†’ ç”³è¯·API â†’ å¤åˆ¶å¯†é’¥ â†’ ç²˜è´´åˆ°ä¸Šæ–¹é…ç½®</p>
        </div>

        <footer class="footer">
            <p><strong>ğŸ‰ ç”Ÿå‘½æ–¹ç¨‹å¼ - è®©æ˜Ÿåº§è¿åŠ¿æ›´ç§‘å­¦</strong></p>
            <p>âœ¨ åŸºäºèšåˆæ•°æ®APIçš„ä¸“ä¸šæ˜Ÿåº§åˆ†æç³»ç»Ÿ</p>
            <p>ğŸŒŸ æ”¯æŒå››ç»´è¯„åˆ† | å¹¸è¿å…ƒç´  | å¤šç±»å‹æŸ¥è¯¢</p>
            <p>ğŸ“± å®Œç¾é€‚é…ç§»åŠ¨ç«¯ | GitHub Pageså…è´¹æ‰˜ç®¡</p>
            <div class="copyright">
                <p>&copy; 2024 ç”Ÿå‘½æ–¹ç¨‹å¼å›¢é˜Ÿ | ä»…ä¾›å¨±ä¹å‚è€ƒ | <a href="https://github.com" target="_blank" rel="noopener" style="color: #90EE90;">GitHubå¼€æº</a></p>
            </div>
        </footer>
    </div>

    <script>
        // æ¼”ç¤ºæ¨¡å¼æ•°æ®ç”Ÿæˆ
        function generateDemoData() {
            const demoTexts = {
                summary: [
                    'ä»Šæ—¥è¿åŠ¿æ•´ä½“å‘ˆä¸Šå‡è¶‹åŠ¿ï¼Œé€‚åˆåšå‡ºé‡è¦å†³å®šã€‚',
                    'ä»Šå¤©çš„èƒ½é‡åœºç‰¹åˆ«å¼ºï¼Œæœ‰åˆ©äºäººé™…å…³ç³»å‘å±•ã€‚',
                    'å®‡å®™èƒ½é‡ä¸ºä½ å¸¦æ¥å¥½è¿ï¼ŒæŠŠæ¡ä»Šæ—¥æœºé‡ã€‚',
                    'ä»Šæ—¥é€‚åˆå†’é™©å’Œå°è¯•æ–°äº‹ç‰©ï¼Œä¼šæœ‰æ„å¤–æ”¶è·ã€‚',
                    'ä¿æŒç§¯æå¿ƒæ€ï¼Œä»Šå¤©å°†æœ‰è´µäººç›¸åŠ©ã€‚'
                ],
                love: ['å•èº«è€…æœ‰æ¡ƒèŠ±è¿', 'æ„Ÿæƒ…ç”Ÿæ´»ç”œèœœ', 'éœ€è¦å¤šæ²Ÿé€šç†è§£', 'çˆ±æƒ…è¿åŠ¿ä¸Šå‡', 'æœ‰æœ›é‡åˆ°çœŸçˆ±'],
                work: ['å·¥ä½œæ•ˆç‡å¾ˆé«˜', 'å®¹æ˜“è·å¾—è®¤å¯', 'é€‚åˆå›¢é˜Ÿåˆä½œ', 'æœ‰å‡èŒæœºä¼š', 'åˆ›æ„çµæ„Ÿä¸°å¯Œ'],
                money: ['è´¢è¿äº¨é€š', 'æŠ•èµ„éœ€è°¨æ…', 'æœ‰æ„å¤–æ”¶å…¥', 'ç†è´¢è¿ä½³', 'æ¶ˆè´¹è¦èŠ‚åˆ¶'],
                health: ['ç²¾ç¥çŠ¶æ€é¥±æ»¡', 'æ³¨æ„ä¼‘æ¯', 'é€‚åˆè¿åŠ¨', 'ä¿æŒå¥½å¿ƒæƒ…', 'è¥å…»è¦å‡è¡¡']
            };

            const colors = ['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7', '#DDA0DD', '#98D8C8', '#F7DC6F'];
            const numbers = [1, 3, 6, 8, 9, 11, 16, 18, 21, 28];

            return Object.keys(constellationMap).map(key => {
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                const randomNumber = numbers[Math.floor(Math.random() * numbers.length)];
                const randomFriend = Object.keys(constellationMap)[Math.floor(Math.random() * 12)];
                
                return {
                    name: key,
                    summary: demoTexts.summary[Math.floor(Math.random() * demoTexts.summary.length)],
                    love: Math.floor(Math.random() * 3) + 3, // 3-5æ˜Ÿ
                    love_txt: demoTexts.love[Math.floor(Math.random() * demoTexts.love.length)],
                    work: Math.floor(Math.random() * 3) + 3,
                    work_txt: demoTexts.work[Math.floor(Math.random() * demoTexts.work.length)],
                    money: Math.floor(Math.random() * 3) + 3,
                    money_txt: demoTexts.money[Math.floor(Math.random() * demoTexts.money.length)],
                    health: Math.floor(Math.random() * 3) + 3,
                    health_txt: demoTexts.health[Math.floor(Math.random() * demoTexts.health.length)],
                    color: randomColor,
                    number: randomNumber,
                    QFriend: randomFriend
                };
            });
        }

        // æ¼”ç¤ºæ¨¡å¼
        function runDemoMode() {
            if (isLoading) {
                showStatus('âš ï¸ è¯·ç­‰å¾…å½“å‰æ“ä½œå®Œæˆ', 'info');
                return;
            }

            setLoading(true);
            showStatus('ğŸ­ å¯åŠ¨æ¼”ç¤ºæ¨¡å¼ï¼Œç”Ÿæˆæ¨¡æ‹Ÿè¿åŠ¿æ•°æ®...', 'loading');

            setTimeout(() => {
                const targetConstellation = safeGetElement('targetConstellation')?.value;
                const demoData = generateDemoData();
                
                if (targetConstellation) {
                    const singleData = demoData.find(item => item.name === targetConstellation);
                    if (singleData) {
                        displayResults(singleData, true);
                        showStatus(`âœ… æ¼”ç¤ºæ¨¡å¼ï¼š${constellationMap[targetConstellation].name}è¿åŠ¿å·²ç”Ÿæˆï¼

ğŸ­ è¿™æ˜¯æ¨¡æ‹Ÿæ•°æ®ï¼Œå±•ç¤ºåº”ç”¨ç•Œé¢å’ŒåŠŸèƒ½
ğŸ’¡ è¦è·å–çœŸå®æ•°æ®ï¼Œè¯·é…ç½®APIå¯†é’¥åç‚¹å‡»"è·å–çœŸå®è¿åŠ¿"
ğŸŒŸ æ¼”ç¤ºæ•°æ®ä»…ä¾›ç•Œé¢é¢„è§ˆï¼Œä¸å…·æœ‰å®é™…å‚è€ƒä»·å€¼`, 'success');
                    }
                } else {
                    displayResults(demoData, true);
                    showStatus(`âœ… æ¼”ç¤ºæ¨¡å¼ï¼š12æ˜Ÿåº§è¿åŠ¿å·²å…¨éƒ¨ç”Ÿæˆï¼

ğŸ­ æ¼”ç¤ºåŠŸèƒ½è¯´æ˜ï¼š
â€¢ è¿™æ˜¯å®Œå…¨æ¨¡æ‹Ÿçš„æ•°æ®ï¼Œä»…ç”¨äºå±•ç¤ºç•Œé¢æ•ˆæœ
â€¢ åŒ…å«å››ç»´è¯„åˆ†ã€å¹¸è¿å…ƒç´ ç­‰å®Œæ•´ä¿¡æ¯
â€¢ çœŸå®æ•°æ®éœ€è¦é…ç½®èšåˆæ•°æ®APIå¯†é’¥è·å–

ğŸ’¡ ä½“éªŒå®Œæ¯•åï¼Œè¯·é…ç½®APIè·å–çœŸå®è¿åŠ¿æ•°æ®ï¼`, 'success');
                }
                
                setLoading(false);
            }, 2000);
        }

        // è·å–æ˜Ÿåº§è¿åŠ¿æ•°æ®
        async function fetchHoroscopeData() {
            if (isLoading) {
                showStatus('âš ï¸ è¯·ç­‰å¾…å½“å‰æ“ä½œå®Œæˆ', 'info');
                return;
            }

            const apiKey = safeGetElement('apiKey')?.value.trim();
            const consType = safeGetElement('consType')?.value || 'today';
            const targetConstellation = safeGetElement('targetConstellation')?.value;

            if (!apiKey) {
                showStatus(`âŒ è¯·å…ˆé…ç½®APIå¯†é’¥ï¼

ğŸ”‘ è·å–æ­¥éª¤ï¼š
1. è®¿é—®èšåˆæ•°æ®å®˜ç½‘ (juhe.cn)
2. æ³¨å†Œè´¦å·å¹¶å®åè®¤è¯
3. ç”³è¯·"æ˜Ÿåº§è¿åŠ¿"API
4. å¤åˆ¶APIå¯†é’¥åˆ°ä¸Šæ–¹è¾“å…¥æ¡†
5. ç‚¹å‡»"æµ‹è¯•è¿æ¥"ç¡®è®¤å¯ç”¨

ğŸ’¡ æˆ–è€…å…ˆç‚¹å‡»"æ¼”ç¤ºæ¨¡å¼"ä½“éªŒç•Œé¢æ•ˆæœ`, 'error', false);
                return;
            }

            setLoading(true);
            showStatus('ğŸš€ æ­£åœ¨è¿æ¥èšåˆæ•°æ®APIè·å–çœŸå®è¿åŠ¿æ•°æ®...', 'loading');

            try {
                if (targetConstellation) {
                    // è·å–å•ä¸ªæ˜Ÿåº§
                    const url = `https://apis.juhe.cn/fapig/constellation/getAll?key=${apiKey}&consName=${targetConstellation}&type=${consType}`;
                    
                    showStatus(`ğŸ” æ­£åœ¨è·å–${constellationMap[targetConstellation].name}çš„${getTypeDisplayName()}è¿åŠ¿...`, 'loading');
                    
                    const response = await fetch(url);
                    const result = await response.json();
                    
                    if (result.error_code === 0) {
                        currentData = result.result;
                        displayResults(currentData);
                        showStatus(`âœ… æˆåŠŸè·å–${constellationMap[targetConstellation].name}è¿åŠ¿æ•°æ®ï¼

ğŸ“Š æ•°æ®æ¥æºï¼šèšåˆæ•°æ®API
ğŸ“… è¿åŠ¿ç±»å‹ï¼š${getTypeDisplayName()}è¿åŠ¿
â° è·å–æ—¶é—´ï¼š${new Date().toLocaleString()}
ğŸŒŸ æ•°æ®è´¨é‡ï¼šå®æ—¶å‡†ç¡®`, 'success');
                    } else {
                        throw new Error(`${result.reason} (é”™è¯¯ç : ${result.error_code})`);
                    }
                } else {
                    // è·å–æ‰€æœ‰æ˜Ÿåº§
                    const constellations = Object.keys(constellationMap);
                    const results = [];
                    let completed = 0;
                    let errors = 0;
                    
                    showStatus(`ğŸŒŸ å¼€å§‹è·å–12æ˜Ÿåº§${getTypeDisplayName()}è¿åŠ¿æ•°æ®...`, 'loading');
                    
                    for (const constellation of constellations) {
                        try {
                            const url = `https://apis.juhe.cn/fapig/constellation/getAll?key=${apiKey}&consName=${constellation}&type=${consType}`;
                            const response = await fetch(url);
                            const result = await response.json();
                            
                            completed++;
                            showStatus(`ğŸ”„ è·å–è¿›åº¦ï¼š${completed}/${constellations.length} - æ­£åœ¨å¤„ç†${constellationMap[constellation].name}`, 'loading');
                            
                            if (result.error_code === 0) {
                                results.push(result.result);
                            } else {
                                errors++;
                                console.warn(`${constellation} è·å–å¤±è´¥:`, result.reason);
                            }
                            
                            // é¿å…è¯·æ±‚è¿‡äºé¢‘ç¹
                            if (completed < constellations.length) {
                                await new Promise(resolve => setTimeout(resolve, 300));
                            }
                            
                        } catch (error) {
                            errors++;
                            console.error(`è·å–${constellation}è¿åŠ¿å¤±è´¥:`, error);
                        }
                    }
                    
                    if (results.length > 0) {
                        currentData = results;
                        displayResults(currentData);
                        showStatus(`âœ… æ‰¹é‡è·å–å®Œæˆï¼æˆåŠŸè·å–${results.length}ä¸ªæ˜Ÿåº§è¿åŠ¿

ğŸ“Š è·å–ç»Ÿè®¡ï¼š
â€¢ æˆåŠŸï¼š${results.length} ä¸ªæ˜Ÿåº§
â€¢ å¤±è´¥ï¼š${errors} ä¸ªæ˜Ÿåº§  
â€¢ æˆåŠŸç‡ï¼š${Math.round((results.length / constellations.length) * 100)}%

ğŸ“… è¿åŠ¿ç±»å‹ï¼š${getTypeDisplayName()}è¿åŠ¿
â° å®Œæˆæ—¶é—´ï¼š${new Date().toLocaleString()}
ğŸ’ æ•°æ®æ¥æºï¼šèšåˆæ•°æ®å®˜æ–¹API`, 'success');
                    } else {
                        throw new Error('æœªè·å–åˆ°ä»»ä½•æœ‰æ•ˆæ•°æ®');
                    }
                }
                
            } catch (error) {
                console.error('APIè¯·æ±‚å¤±è´¥:', error);
                showStatus(`âŒ è·å–è¿åŠ¿æ•°æ®å¤±è´¥

ğŸ” é”™è¯¯ä¿¡æ¯ï¼š${error.message}

ğŸ’¡ å¯èƒ½çš„è§£å†³æ–¹æ¡ˆï¼š
â€¢ æ£€æŸ¥APIå¯†é’¥æ˜¯å¦æ­£ç¡®
â€¢ ç¡®è®¤è´¦æˆ·ä½™é¢æ˜¯å¦å……è¶³
â€¢ éªŒè¯ç½‘ç»œè¿æ¥çŠ¶æ€
â€¢ å°è¯•åˆ‡æ¢è¿åŠ¿ç±»å‹
â€¢ è”ç³»èšåˆæ•°æ®å®¢æœ

ğŸ­ æˆ–è€…å…ˆä½¿ç”¨"æ¼”ç¤ºæ¨¡å¼"ä½“éªŒåŠŸèƒ½`, 'error', false);
            } finally {
                setLoading(false);
            }
        }

        // æµ‹è¯•APIè¿æ¥
        async function testApiConnection() {
            if (isLoading) {
                showStatus('âš ï¸ è¯·ç­‰å¾…å½“å‰æ“ä½œå®Œæˆ', 'info');
                return;
            }

            const apiKey = safeGetElement('apiKey')?.value.trim();

            if (!apiKey) {
                showStatus(`âŒ è¯·å…ˆè¾“å…¥APIå¯†é’¥ï¼

ğŸ”‘ è·å–APIå¯†é’¥æ­¥éª¤ï¼š
1. å‰å¾€ https://www.juhe.cn
2. æ³¨å†Œå¹¶ç™»å½•è´¦å·
3. æœç´¢"æ˜Ÿåº§è¿åŠ¿"API
4. ç”³è¯·æ¥å£å¹¶è·å–å¯†é’¥
5. å°†å¯†é’¥ç²˜è´´åˆ°ä¸Šæ–¹è¾“å…¥æ¡†`, 'error', false);
                return;
            }

            setLoading(true);
            showStatus('ğŸ”§ æ­£åœ¨æµ‹è¯•APIè¿æ¥...', 'loading');

            try {
                const testUrl = `https://apis.juhe.cn/fapig/constellation/getAll?key=${apiKey}&consName=aries&type=today`;
                
                showStatus('ğŸ” å‘é€æµ‹è¯•è¯·æ±‚åˆ°èšåˆæ•°æ®æœåŠ¡å™¨...', 'loading');
                
                const response = await fetch(testUrl);
                const result = await response.json();
                
                if (result.error_code === 0) {
                    showStatus(`âœ… APIè¿æ¥æµ‹è¯•æˆåŠŸï¼

ğŸ¯ æµ‹è¯•ç»“æœè¯¦æƒ…ï¼š
â€¢ APIå¯†é’¥ï¼šæœ‰æ•ˆ âœ“
â€¢ æœåŠ¡å™¨å“åº”ï¼šæ­£å¸¸ âœ“  
â€¢ æ•°æ®æ ¼å¼ï¼šæ­£ç¡® âœ“
â€¢ è´¦æˆ·çŠ¶æ€ï¼šå¯ç”¨ âœ“
â€¢ æµ‹è¯•æ˜Ÿåº§ï¼šç™½ç¾Šåº§ âœ“

ğŸ“Š è¿”å›æ•°æ®é¢„è§ˆï¼š
â€¢ è¿åŠ¿æ¦‚è¿°ï¼š${result.result.summary.substring(0, 20)}...
â€¢ çˆ±æƒ…æŒ‡æ•°ï¼š${result.result.love}æ˜Ÿ
â€¢ å·¥ä½œæŒ‡æ•°ï¼š${result.result.work}æ˜Ÿ
â€¢ è´¢è¿æŒ‡æ•°ï¼š${result.result.money}æ˜Ÿ
â€¢ å¥åº·æŒ‡æ•°ï¼š${result.result.health}æ˜Ÿ

ğŸŒŸ APIé…ç½®å®Œæˆï¼Œç°åœ¨å¯ä»¥è·å–å®Œæ•´è¿åŠ¿æ•°æ®äº†ï¼`, 'success');
                } else {
                    throw new Error(`${result.reason} (é”™è¯¯ç : ${result.error_code})`);
                }
                
            } catch (error) {
                console.error('APIæµ‹è¯•å¤±è´¥:', error);
                let errorMessage = `âŒ APIè¿æ¥æµ‹è¯•å¤±è´¥

ğŸ” é”™è¯¯è¯¦æƒ…ï¼š${error.message}`;

                if (error.message.includes('NetworkError') || error.message.includes('fetch')) {
                    errorMessage += `

ğŸŒ ç½‘ç»œç›¸å…³é—®é¢˜ï¼š
â€¢ æ£€æŸ¥ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
â€¢ ç¡®è®¤é˜²ç«å¢™æ²¡æœ‰é˜»æ‹¦è¯·æ±‚
â€¢ å°è¯•åˆ·æ–°é¡µé¢é‡è¯•
â€¢ å¯èƒ½å­˜åœ¨è·¨åŸŸé™åˆ¶é—®é¢˜

ğŸ’¡ å»ºè®®ï¼šå°†åº”ç”¨éƒ¨ç½²åˆ°æœåŠ¡å™¨ç¯å¢ƒè¿è¡Œ`;
                } else if (error.message.includes('key')) {
                    errorMessage += `

ğŸ”‘ APIå¯†é’¥é—®é¢˜ï¼š
â€¢ ç¡®è®¤å¯†é’¥å¤åˆ¶å®Œæ•´æ— è¯¯
â€¢ æ£€æŸ¥APIæ˜¯å¦å·²ç”³è¯·æˆåŠŸ
â€¢ éªŒè¯è´¦æˆ·æ˜¯å¦å·²å®åè®¤è¯
â€¢ ç¡®è®¤APIæœåŠ¡çŠ¶æ€æ­£å¸¸`;
                }

                errorMessage += `

ğŸ­ ä¸´æ—¶è§£å†³æ–¹æ¡ˆï¼šç‚¹å‡»"æ¼”ç¤ºæ¨¡å¼"ä½“éªŒåŠŸèƒ½`;

                showStatus(errorMessage, 'error', false);
            } finally {
                setLoading(false);
            }
        }

        // é”®ç›˜å¿«æ·é”®
        function setupKeyboardShortcuts() {
            document.addEventListener('keydown', function(e) {
                if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA' || e.target.tagName === 'SELECT') {
                    return;
                }

                if (e.ctrlKey || e.metaKey) {
                    switch(e.key.toLowerCase()) {
                        case 'enter':
                            e.preventDefault();
                            fetchHoroscopeData();
                            break;
                        case 't':
                            e.preventDefault();
                            testApiConnection();
                            break;
                        case 'd':
                            e.preventDefault();
                            runDemoMode();
                            break;
                        case 'c':
                            e.preventDefault();
                            clearResults();
                            break;
                    }
                }
            });
        }

        // åˆå§‹åŒ–é¡µé¢
        function initializePage() {
            console.log('ğŸš€ åˆå§‹åŒ–ç”Ÿå‘½æ–¹ç¨‹å¼åº”ç”¨...');
            
            // è®¾ç½®å½“å‰æ—¥æœŸ
            const today = new Date();
            const dateStr = today.toLocaleDateString('zh-CN', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                weekday: 'long'
            });
            
            const dateEl = safeGetElement('dateSubtitle');
            if (dateEl) {
                dateEl.textContent = `${dateStr} | åŸºäºèšåˆæ•°æ®API`;
            }
            
            // ç»‘å®šäº‹ä»¶ç›‘å¬å™¨
            const bindings = [
                { id: 'fetchBtn', handler: fetchHoroscopeData },
                { id: 'testApiBtn', handler: testApiConnection },
                { id: 'demoBtn', handler: runDemoMode },
                { id: 'clearBtn', handler: clearResults }
            ];

            bindings.forEach(({ id, handler }) => {
                const element = safeGetElement(id);
                if (element) {
                    element.addEventListener('click', handler);
                } else {
                    console.warn(`æŒ‰é’® ${id} æœªæ‰¾åˆ°`);
                }
            });

            // è®¾ç½®é”®ç›˜å¿«æ·é”®
            setupKeyboardShortcuts();
            
            console.log('âœ… ç”Ÿå‘½æ–¹ç¨‹å¼åˆå§‹åŒ–å®Œæˆ');
            
            // æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯
            showStatus(`ğŸ‰ æ¬¢è¿ä½¿ç”¨ç”Ÿå‘½æ–¹ç¨‹å¼ï¼

âœ¨ GitHub Pages éƒ¨ç½²ç‰ˆç‰¹æ€§ï¼š
â€¢ ğŸŒŸ çœŸå®APIæ•°æ®è·å–
â€¢ ğŸ­ æ¼”ç¤ºæ¨¡å¼ä½“éªŒ  
â€¢ ğŸ“± å®Œç¾å“åº”å¼è®¾è®¡
â€¢ âŒ¨ï¸ é”®ç›˜å¿«æ·é”®æ”¯æŒ
â€¢ ğŸ”§ å®Œæ•´é”™è¯¯å¤„ç†æœºåˆ¶

ğŸš€ å¿«æ·é”®æŒ‡å—ï¼š
â€¢ Ctrl + Enter: è·å–è¿åŠ¿
â€¢ Ctrl + T: æµ‹è¯•API
â€¢ Ctrl + D: æ¼”ç¤ºæ¨¡å¼
â€¢ Ctrl + C: æ¸…é™¤æ•°æ®

ğŸ’¡ ä½¿ç”¨å»ºè®®ï¼š
1. å…ˆç‚¹å‡»"æ¼”ç¤ºæ¨¡å¼"ä½“éªŒç•Œé¢
2. è·å–APIå¯†é’¥åæµ‹è¯•è¿æ¥  
3. é…ç½®å®Œæˆå³å¯è·å–çœŸå®æ•°æ®

ğŸŒŸ ç«‹å³å¼€å§‹æ‚¨çš„æ˜Ÿåº§è¿åŠ¿ä¹‹æ—…å§ï¼`, 'info');
        }

        // é¡µé¢ç”Ÿå‘½å‘¨æœŸç®¡ç†
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ“„ DOMå†…å®¹åŠ è½½å®Œæˆ');
            initializePage();
        });

        window.addEventListener('load', function() {
            console.log('ğŸŒ é¡µé¢èµ„æºåŠ è½½å®Œæˆ');
            // ç¡®ä¿é¡µé¢å®Œå…¨åŠ è½½åå†æ¬¡æ£€æŸ¥åˆå§‹åŒ–
            if (!document.querySelector('.status:not(.hidden)')) {
                initializePage();
            }
        });

        // é”™è¯¯å¤„ç†
        window.addEventListener('error', function(e) {
            console.error('é¡µé¢é”™è¯¯:', e.error);
            showStatus(`âš ï¸ é¡µé¢å‘ç”Ÿé”™è¯¯ï¼š${e.error.message}

è¯·å°è¯•åˆ·æ–°é¡µé¢æˆ–è”ç³»æŠ€æœ¯æ”¯æŒã€‚`, 'error');
        });

        // é¡µé¢å¯è§æ€§å˜åŒ–å¤„ç†
        document.addEventListener('visibilitychange', function() {
            if (document.visibilityState === 'visible' && isLoading) {
                showStatus('ğŸ”„ é¡µé¢é‡æ–°æ¿€æ´»ï¼Œè¯·æ£€æŸ¥æ“ä½œçŠ¶æ€', 'info');
            }
        });

        console.log('ğŸŒŸ ç”Ÿå‘½æ–¹ç¨‹å¼ - GitHub Pagesç‰ˆæœ¬åŠ è½½å®Œæˆ');
    </script>
</body>
</html> æ˜Ÿåº§æ˜ å°„é…ç½®
        const constellationMap = {
            'aries': { name: 'ç™½ç¾Šåº§', symbol: 'â™ˆ', period: '3.21-4.19' },
            'taurus': { name: 'é‡‘ç‰›åº§', symbol: 'â™‰', period: '4.20-5.20' },
            'gemini': { name: 'åŒå­åº§', symbol: 'â™Š', period: '5.21-6.21' },
            'cancer': { name: 'å·¨èŸ¹åº§', symbol: 'â™‹', period: '6.22-7.22' },
            'leo': { name: 'ç‹®å­åº§', symbol: 'â™Œ', period: '7.23-8.22' },
            'virgo': { name: 'å¤„å¥³åº§', symbol: 'â™', period: '8.23-9.22' },
            'libra': { name: 'å¤©ç§¤åº§', symbol: 'â™', period: '9.23-10.23' },
            'scorpio': { name: 'å¤©èåº§', symbol: 'â™', period: '10.24-11.22' },
            'sagittarius': { name: 'å°„æ‰‹åº§', symbol: 'â™', period: '11.23-12.21' },
            'capricorn': { name: 'æ‘©ç¾¯åº§', symbol: 'â™‘', period: '12.22-1.19' },
            'aquarius': { name: 'æ°´ç“¶åº§', symbol: 'â™’', period: '1.20-2.18' },
            'pisces': { name: 'åŒé±¼åº§', symbol: 'â™“', period: '2.19-3.20' }
        };

        // å…¨å±€çŠ¶æ€ç®¡ç†
        let isLoading = false;
        let currentData = null;

        // å·¥å…·å‡½æ•°
        function safeGetElement(id) {
            const element = document.getElementById(id);
            if (!element) {
                console.warn(`æœªæ‰¾åˆ°å…ƒç´ : ${id}`);
            }
            return element;
        }

        function showStatus(message, type = 'info', autoHide = true) {
            const statusEl = safeGetElement('statusMessage');
            if (statusEl) {
                statusEl.className = `status ${type}`;
                statusEl.textContent = message;
                statusEl.classList.remove('hidden');
                
                if (type === 'info' && autoHide) {
                    setTimeout(() => hideStatus(), 4000);
                } else if (type === 'success' && autoHide) {
                    setTimeout(() => hideStatus(), 6000);
                }
            }
        }

        function hideStatus() {
            const statusEl = safeGetElement('statusMessage');
            if (statusEl) {
                statusEl.classList.add('hidden');
            }
        }

        function setLoading(loading) {
            isLoading = loading;
            const buttons = document.querySelectorAll('.btn');
            buttons.forEach(btn => {
                if (loading) {
                    btn.disabled = true;
                    if (btn.id === 'fetchBtn') {
                        btn.innerHTML = '<span class="loading-spinner"></span>è·å–ä¸­...';
                    }
                } else {
                    btn.disabled = false;
                    if (btn.id === 'fetchBtn') {
                        btn.innerHTML = 'ğŸŒŸ è·å–çœŸå®è¿åŠ¿';
                    }
                }
            });
        }

        // æ¸…é™¤ç»“æœ
        function clearResults() {
            const resultsEl = safeGetElement('horoscopeResults');
            if (resultsEl) {
                resultsEl.classList.add('hidden');
                resultsEl.innerHTML = '';
            }
            currentData = null;
            showStatus('âœ… æ•°æ®å·²æ¸…é™¤ï¼å¯ä»¥é‡æ–°è·å–è¿åŠ¿æ•°æ®ã€‚', 'success');
        }

        // åˆ›å»ºæ˜Ÿåº§è¿åŠ¿å¡ç‰‡
        function createHoroscopeCard(data, isDemo = false) {
            const constellation = constellationMap[data.name] || { name: data.name, symbol: 'ğŸŒŸ', period: '' };
            const summary = data.summary || 'ä»Šæ—¥è¿åŠ¿è‰¯å¥½ï¼Œä¿æŒç§¯æå¿ƒæ€ã€‚';
            
            return `
                <div class="horoscope-card">
                    <h3 class="card-title">
                        ${constellation.symbol} ${constellation.name}
                        ${constellation.period ? `<br><small style="font-size:0.8em;opacity:0.7;">${constellation.period}</small>` : ''}
                    </h3>
                    <div class="card-content">
                        <h4>ğŸ’« ${getTypeDisplayName()}è¿åŠ¿æ¦‚è¿°</h4>
                        <p>${summary}</p>
                        
                        <h4>ğŸ’ çˆ±æƒ…è¿åŠ¿</h4>
                        <p>${data.love_txt || 'çˆ±æƒ…è¿åŠ¿è‰¯å¥½'} <span class="star-rating">${'â˜…'.repeat(parseInt(data.love) || 4)}</span></p>
                        
                        <h4>ğŸ’¼ å·¥ä½œè¿åŠ¿</h4>
                        <p>${data.work_txt || 'å·¥ä½œè¿åŠ¿å¹³ç¨³'} <span class="star-rating">${'â˜…'.repeat(parseInt(data.work) || 4)}</span></p>
                        
                        <h4>ğŸ’° è´¢è¿</h4>
                        <p>${data.money_txt || 'è´¢è¿ç¨³å®š'} <span class="star-rating">${'â˜…'.repeat(parseInt(data.money) || 4)}</span></p>
                        
                        <h4>ğŸ¥ å¥åº·è¿åŠ¿</h4>
                        <p>${data.health_txt || 'å¥åº·çŠ¶å†µè‰¯å¥½'} <span class="star-rating">${'â˜…'.repeat(parseInt(data.health) || 4)}</span></p>
                        
                        <div class="lucky-info">
                            <h4>ğŸ€ å¹¸è¿å…ƒç´ </h4>
                            <p>å¹¸è¿é¢œè‰²: <span class="color-preview" style="background-color: ${data.color || '#90EE90'};"></span>${data.color || 'ç»¿è‰²'}</p>
                            <p>å¹¸è¿æ•°å­—: <strong>${data.number || '8'}</strong></p>
                            <p>é€Ÿé…æ˜Ÿåº§: <strong>${constellationMap[data.QFriend]?.name || data.QFriend || 'å¤©ç§¤åº§'}</strong></p>
                        </div>
                        
                        ${isDemo ? '<div style="text-align:center;margin-top:15px;opacity:0.7;"><small>ğŸ­ æ¼”ç¤ºæ•°æ®</small></div>' : ''}
                    </div>
                </div>
            `;
        }

        function getTypeDisplayName() {
            const consType = safeGetElement('consType')?.value || 'today';
            const typeMap = {
                'today': 'ä»Šæ—¥',
                'tomorrow': 'æ˜æ—¥', 
                'week': 'æœ¬å‘¨',
                'month': 'æœ¬æœˆ'
            };
            return typeMap[consType] || 'ä»Šæ—¥';
        }

        // æ˜¾ç¤ºè¿åŠ¿ç»“æœ
        function displayResults(data, isDemo = false) {
            const resultsEl = safeGetElement('horoscopeResults');
            if (!resultsEl) return;
            
            if (Array.isArray(data)) {
                resultsEl.innerHTML = data.map(item => createHoroscopeCard(item, isDemo)).join('');
            } else {
                resultsEl.innerHTML = createHoroscopeCard(data, isDemo);
            }
            
            resultsEl.classList.remove('hidden');
            
            // æ»šåŠ¨åˆ°ç»“æœåŒºåŸŸ
            setTimeout(() => {
                resultsEl.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 300);
        }

        //
